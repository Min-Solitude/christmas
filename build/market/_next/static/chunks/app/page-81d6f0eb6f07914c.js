(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1542:function(t){"use strict";t.exports=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var a=0;a<t.length;a++){var n=t.charAt(a),o=n.charCodeAt(0);if(255!==e[o])throw TypeError(n+" is ambiguous");e[o]=a}var i=t.length,c=t.charAt(0),s=Math.log(i)/Math.log(256),l=Math.log(256)/Math.log(i);function d(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,a=0,n=0;t[r]===c;)a++,r++;for(var o=(t.length-r)*s+1>>>0,l=new Uint8Array(o);t[r];){var d=e[t.charCodeAt(r)];if(255===d)return;for(var u=0,h=o-1;(0!==d||u<n)&&-1!==h;h--,u++)d+=i*l[h]>>>0,l[h]=d%256>>>0,d=d/256>>>0;if(0!==d)throw Error("Non-zero carry");n=u,r++}for(var m=o-n;m!==o&&0===l[m];)m++;for(var f=new Uint8Array(a+(o-m)),y=a;m!==o;)f[y++]=l[m++];return f}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,a=0,n=0,o=e.length;n!==o&&0===e[n];)n++,r++;for(var s=(o-n)*l+1>>>0,d=new Uint8Array(s);n!==o;){for(var u=e[n],h=0,m=s-1;(0!==u||h<a)&&-1!==m;m--,h++)u+=256*d[m]>>>0,d[m]=u%i>>>0,u=u/i>>>0;if(0!==u)throw Error("Non-zero carry");a=h,n++}for(var f=s-a;f!==s&&0===d[f];)f++;for(var y=c.repeat(r);f<s;++f)y+=t.charAt(d[f]);return y},decodeUnsafe:d,decode:function(t){var e=d(t);if(e)return e;throw Error("Non-base"+i+" character")}}}},8870:function(t,e,r){let a=r(1542);t.exports=a("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},3914:function(t,e,r){Promise.resolve().then(r.bind(r,2867))},2867:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var a=r(7437),n=r(9004),o=r(2173),i=r(8870),c=r.n(i),s=r(2265),l=r(171),d=function(t){let{image:e,name:r,isBuy:i,cardId:s,price:d,onBuy:u,marketItemList:h}=t,m=async()=>{var t;null===(t=document.getElementById("card-modal-".concat(s)))||void 0===t||t.close();let e=l.Am.loading("Buying nft...");try{await window.solana.connect();let t=window.solana.publicKey.toBase58(),r=await o.Z.post("".concat(n.Z.API_ENDPOINT,"/ca"),{wallet:t,type:"marketBuy",marketItemList:h}),a=new TextEncoder().encode(r.data.id),i=await window.solana.signMessage(a);await o.Z.post("".concat(n.Z.API_ENDPOINT,"/ca/verify"),{ca:r.data.id,wallet:t,signature:c().encode(i.signature)}),await o.Z.post("".concat(n.Z.API_ENDPOINT,"/market/buy"),{wallet:t,marketListItem:h}),l.Am.dismiss(e),l.Am.success("Your nft listed successfully!")}catch(t){l.Am.error("Failed to list your nft to marketplace!")}u()};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"card card-compact w-full bg-white  shadow border text-xs max-h-[300px]",children:[(0,a.jsx)("figure",{children:(0,a.jsx)("img",{src:e,alt:"Shoes"})}),(0,a.jsxs)("div",{className:"px-2 text-start mt-3",children:[(0,a.jsx)("h2",{className:"",style:{fontSize:15,fontWeight:600},children:r}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-5 pb-2 ",children:[(0,a.jsx)("div",{className:"flex flex-col text-start gap-y-1",children:(0,a.jsxs)("p",{style:{fontSize:14,fontWeight:600},children:[d," XMS"]})}),(0,a.jsx)("button",{className:"px-5 py-2 rounded-xl border",onClick:()=>{var t;return null===(t=document.getElementById("card-modal-".concat(s)))||void 0===t?void 0:t.showModal()},children:i?"Buy":"List on market"}),(0,a.jsx)("dialog",{id:"card-modal-".concat(s),className:"modal modal-bottom sm:modal-middle ",children:(0,a.jsxs)("div",{className:"modal-box bg-white",children:[(0,a.jsxs)("h3",{className:"font-bold text-lg",children:["Buy ",r]}),(0,a.jsxs)("p",{className:"py-4",children:["Do you want to buy ",r," with ",d," XMS ?"]}),(0,a.jsx)("div",{className:"modal-action",children:(0,a.jsxs)("div",{method:"dialog ",children:[(0,a.jsx)("button",{className:"btn btn-ghost font-light",onClick:()=>{var t;return null===(t=document.getElementById("card-modal-".concat(s)))||void 0===t?void 0:t.close()},children:"Cancel"}),(0,a.jsx)("button",{className:"btn btn-ghost font-light",onClick:m,children:"Buy"})]})})]})})]})]})]})})};function u(){let[t,e]=(0,s.useState)({});(0,s.useEffect)(()=>{r()},[]);let r=async()=>{let t=await o.Z.get("".concat(n.Z.API_ENDPOINT,"/market")),r=await window.solana.connect();t.data=t.data.filter(t=>t.rewardClaim.wallet.walletAddress!=r.publicKey.toBase58()),e(t.data.reduce((t,e)=>{let r=e.rewardClaim.reward.name;return t[r]||(t[r]=[]),t[r].push(e),t},{}))};return(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsx)(l.Ix,{}),Object.keys(t).map((e,n)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"container mx-auto",style:{paddingTop:24,paddingBottom:24},children:(0,a.jsx)("h1",{style:{fontSize:21,fontWeight:600},children:e})}),(0,a.jsx)("div",{className:"container mx-auto grid grid-cols-2 lg:grid-cols-5 gap-5 grow",children:t[e].map((t,e)=>(0,a.jsx)(d,{image:t.rewardClaim.reward.banner,name:t.rewardClaim.reward.name,isBuy:!0,cardId:"buy-card-".concat(n,"-").concat(e),price:t.amount,marketItemList:t.id,onBuy:r},"buy-card-".concat(n,"-").concat(e)))})]}))]})}r(3385),r(8062)},9004:function(t,e,r){"use strict";r.d(e,{Z:function(){return a}});class a{}a.DEV=!0,a.TOKEN_RATE=1e3,a.API_ENDPOINT="http://localhost",a.NETWORK="https://api.devnet.solana.com"},3385:function(){}},function(t){t.O(0,[713,825,971,938,744],function(){return t(t.s=3914)}),_N_E=t.O()}]);